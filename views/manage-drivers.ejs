<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>
        Manage drivers
    </title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container mw-540 p-3">
        <h3 class="mt-4">ü§ñ Telepresence Robot Portal</h3>
        <h5 class="mb-5 py-2">Admin dashboard</h5>
    </div>

    <div class="container-fluid bg-dark">
        <div class="container mw-540 px-3 py-2">
            <div class=" d-flex">
                <div class="d-flex py-2 me-auto">
                    <h6 class="my-auto text-white">Welcome,<br><b>
                            <%= email %>!
                        </b></h6>
                </div>
                <div class="d-flex py-2">
                    <form method="GET" action="/admin-dashboard">
                        <button type="submit" class="btn btn-light">‚¨ÖÔ∏è Back</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="container mw-540 p-3">
        <h6 class="mx-3">Active invite links</h6>
        <% for (var i=0; i < activeInvites.length; i++) { %>
            <div class="d-flex bg-light text-black mx-2 mt-3 mb-3 px-4 py-3 rounded">
                <div class="d-flex me-auto">
                    <h6 class="my-auto">
                        <%= ".../" + activeInvites[i].substring(0, 16) + "..." %>
                    </h6>
                </div>
                <% var key=activeInvites[i]; %>
                    <button onclick="Copy()" type="button" class="btn btn-sm btn-success me-2">üîó Copy</button>

                    <script>
                        function Copy() {
                            var key = "<%= key %>";
                            var copyText = "https://" + window.location.hostname + "/register/" + key;
                            navigator.clipboard.writeText(copyText);
                        }
                    </script>

                    <form method="POST" action="/delete-invite/<%= activeInvites[i] %>">
                        <button type="submit" class="btn btn-sm btn-danger">Cancel</button>
                    </form>
            </div>
            <% } %>
                <form method="POST" action="/generate-invite">

                    <button type="submit" class="btn m-2 btn btn-dark">Generate invite link</button>
                </form>
                <h6 class="mx-3 mt-3">Active drivers</h6>
                <% Object.keys(activeDrivers).forEach(function(email) { %>
                    <div class="d-flex bg-light text-black mx-2 mt-3 mb-3 px-4 py-3 rounded">
                        <div class="d-flex me-auto">
                            <h6 class="my-auto">
                                <%= email %>
                            </h6>
                        </div>
                        <form method="POST" action="/delete-driver/<%= email %>">
                            <button type="submit" class="btn btn-sm btn-danger">üóëÔ∏è Delete</button>
                        </form>
                    </div>
                    <% }) %>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"></script>
</body>

</html>